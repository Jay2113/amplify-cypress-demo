version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
    build:
      commands:
        - npm run build
  artifacts:
    files:
        - '**/*'
    baseDirectory: build
  cache:
    paths:
        - node_modules/**/*
test:
  phases:
    preTest:
      commands:
        - npx cypress install
    test:
      commands:
        - npm run cypress:run
        - npm run merge-reports
        - npm run generate-report
  artifacts:
    files:
        - '**/*'
    baseDirectory: cypress/reports/mochawesome